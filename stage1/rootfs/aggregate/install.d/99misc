# populate the systemd units
install -d -m 0755 "$ROOT/usr/lib/systemd/system"
install -d -m 0755 "$ROOT/usr/lib/systemd/system/default.target.wants"
install -d -m 0755 "$ROOT/usr/lib/systemd/system/sockets.target.wants"
install -m 0644 units/ctrl-alt-del.target "$ROOT/usr/lib/systemd/system"
install -m 0644 units/default.target "$ROOT/usr/lib/systemd/system"
install -m 0644 units/exit-watcher.service "$ROOT/usr/lib/systemd/system"
install -m 0644 units/local-fs.target "$ROOT/usr/lib/systemd/system"
install -m 0644 units/reaper.service "$ROOT/usr/lib/systemd/system"
install -m 0644 units/sigint.service "$ROOT/usr/lib/systemd/system"
install -m 0644 units/sockets.target "$ROOT/usr/lib/systemd/system"
install -m 0755 scripts/reaper.sh "$ROOT"

# setup stage1's base / outside of /usr
install -d -m 0755 "$ROOT/dev"
install -d -m 0755 "$ROOT/etc"
install -d -m 0755 "$ROOT/proc"
install -d -m 0750 "$ROOT/root"
install -d -m 0755 "$ROOT/run"
install -d -m 0755 "$ROOT/sys"
install -d -m 1777 "$ROOT/tmp"

# these just symlink into usr/
ln -s usr/lib64 "$ROOT/lib64"
ln -s usr/lib "$ROOT/lib"
ln -s usr/bin "$ROOT/bin"

# parent dir for the stage2 bind mounts
install -d "$ROOT/opt/stage2"

# dir for result code files
install -d "$ROOT/rkt/status"

# dir for env files
install -d "$ROOT/rkt/env"
